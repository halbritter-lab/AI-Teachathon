---
phase: 03-presentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - package-lock.json
  - docs/.vitepress/theme/marp-theme.css
  - docs/.vitepress/config.mts
  - Makefile
  - .prettierignore
autonomous: true

must_haves:
  truths:
    - "marp-cli is installed and runnable via npx marp"
    - "Custom dark theme with teal accents renders correctly in Marp output"
    - "npm run build:marp generates presentation HTML from a test slide"
    - "Makefile has marp-related targets"
    - "VitePress sidebar includes a link to the presentation"
  artifacts:
    - path: "docs/.vitepress/theme/marp-theme.css"
      provides: "Custom Marp theme extending Gaia invert with teal/cyan accents"
      contains: "@import 'gaia'"
    - path: "package.json"
      provides: "Marp CLI dependency and build scripts"
      contains: "build:marp"
    - path: "Makefile"
      provides: "Marp build targets"
      contains: "build-marp"
  key_links:
    - from: "package.json build:marp script"
      to: "docs/.vitepress/theme/marp-theme.css"
      via: "--theme flag in marp CLI command"
      pattern: "marp.*--theme.*marp-theme"
    - from: "package.json docs:build script"
      to: "build:marp script"
      via: "npm run build:marp && vitepress build"
      pattern: "build:marp.*&&.*vitepress build"
---

<objective>
Set up the Marp presentation toolchain: install marp-cli, create the custom dark theme with teal/cyan accents, wire build scripts into package.json and Makefile, and add the presentation link to VitePress navigation.

Purpose: Establishes all infrastructure so that Plan 02 can focus purely on writing slide content. Ensures the build pipeline works end-to-end before any real slides are written.

Output: Working Marp build pipeline that converts a test slide into themed HTML in docs/public/presentation.html. VitePress sidebar links to the presentation.
</objective>

<execution_context>
@C:\Users\bernt\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\bernt\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-presentation/03-CONTEXT.md
@.planning/phases/03-presentation/03-RESEARCH.md
@package.json
@Makefile
@docs/.vitepress/config.mts
@docs/.vitepress/theme/style.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Marp CLI and create custom dark theme</name>
  <files>
    package.json
    package-lock.json
    docs/.vitepress/theme/marp-theme.css
  </files>
  <action>
1. Install marp-cli as a dev dependency:
   ```
   npm install --save-dev @marp-team/marp-cli
   ```

2. Create the custom Marp theme file at `docs/.vitepress/theme/marp-theme.css`. This theme extends Gaia's invert class with the project's dark academic aesthetic and teal/cyan accents. Use these exact specifications from RESEARCH.md:

   ```css
   /* @theme teachathon */
   @import 'gaia';

   :root.invert {
     --color-background: #1a1a1a;
     --color-background-code: #0d0d0d;
     --color-foreground: #ffffff;
     --color-header: rgba(255, 255, 255, 0.6);
     --color-highlight: #02c797;
     --color-highlight-hover: #04e6af;
     --color-dimmed: #c6c6c6;
   }

   section {
     background-color: var(--color-background);
     color: var(--color-foreground);
     font-size: 1.8rem;
   }

   h1 {
     font-size: 3.2rem;
     color: var(--color-highlight);
   }

   h2 {
     font-size: 2.4rem;
     border-bottom: 3px solid var(--color-highlight);
     padding-bottom: 0.5rem;
   }

   a {
     color: var(--color-highlight);
     text-decoration: none;
     border-bottom: 2px solid var(--color-highlight);
   }

   a:hover {
     color: var(--color-highlight-hover);
     border-bottom-color: var(--color-highlight-hover);
   }

   section::after {
     color: var(--color-highlight);
     font-weight: 600;
   }

   header, footer {
     color: var(--color-header);
   }

   pre {
     background-color: var(--color-background-code);
     border: 1px solid var(--color-highlight);
   }
   ```

   IMPORTANT: The `/* @theme teachathon */` comment on line 1 is required - Marp uses this to register the theme name. Without it, `theme: teachathon` in frontmatter won't work.
  </action>
  <verify>
    - `npx marp --version` outputs a version number (confirms installation)
    - `docs/.vitepress/theme/marp-theme.css` exists and contains `@import 'gaia'` and `@theme teachathon`
  </verify>
  <done>marp-cli installed as devDependency, custom theme file created with dark background and teal/cyan accent colors extending Gaia invert.</done>
</task>

<task type="auto">
  <name>Task 2: Wire build scripts and add presentation link to site</name>
  <files>
    package.json
    Makefile
    docs/.vitepress/config.mts
    .prettierignore
  </files>
  <action>
1. Create a minimal test slide file at `docs/presentation/slides.md` with Marp frontmatter so the build can be verified:
   ```markdown
   ---
   marp: true
   theme: teachathon
   class: invert
   size: 16:9
   paginate: true
   header: 'AI-Teachathon | Halbritter Lab'
   footer: 'Git, GitHub and AI Tools'
   ---

   # Test Slide

   This is a build verification slide.

   ---

   # Second Test Slide

   If you can see this, the Marp pipeline works.
   ```

2. Create the `docs/public/` directory (it does not exist yet).

3. Update `package.json` scripts - modify `docs:build` to run Marp first, and add standalone Marp scripts:
   - `"build:marp": "marp docs/presentation/slides.md -o docs/public/presentation.html --theme docs/.vitepress/theme/marp-theme.css --html"`
   - `"dev:marp": "marp docs/presentation/slides.md -o docs/public/presentation.html --theme docs/.vitepress/theme/marp-theme.css --html --watch"`
   - Update `"docs:build"` to: `"npm run build:marp && vitepress build docs"`
   Keep all existing scripts (docs:dev, docs:preview, lint, lint:fix, format, format:check) unchanged.

4. Update `Makefile` - add targets:
   - `build-marp: ## Build Marp presentation` -> `npm run build:marp`
   - Update the existing `build` target to depend on `build-marp` (so `make build` runs marp first, then vitepress)
   - Update `check` target to include build-marp before build: `check: lint format-check build`
   - Add `clean` target update to also remove `docs/public/presentation.html`

5. Update `docs/.vitepress/config.mts` - add a "Slides" entry to the sidebar array:
   ```typescript
   { text: 'Slides', link: '/presentation.html', target: '_blank' }
   ```
   Add it after the 'Agenda' entry in the sidebar array. The `target: '_blank'` ensures the presentation opens in a new tab (since it's standalone HTML, not a VitePress page). NOTE: VitePress sidebar item supports a `target` property for external-like links.

   Actually, VitePress sidebar items do NOT support a `target` property directly. Instead, since `presentation.html` lives in `docs/public/`, it will be served at the site root. The sidebar link `/presentation.html` will navigate to it. This is fine - it opens in the same tab, and the presentation has a "back to course" link (added in Plan 02). Use:
   ```typescript
   { text: 'Slides', link: '/presentation.html' }
   ```

6. Add `docs/public/presentation.html` to `.prettierignore` since it's generated output and should not be reformatted by Prettier (it will break Marp's inline styles). Also add `docs/presentation/slides.md` to `.prettierignore` since Marp's directive syntax and slide separators can conflict with Prettier's markdown formatting.

7. Run `npm run build:marp` to generate the test presentation HTML.

8. Verify the full build works: `npm run docs:build` should run marp first, then vitepress, without errors.
  </action>
  <verify>
    - `npm run build:marp` succeeds and `docs/public/presentation.html` is created
    - `docs/public/presentation.html` file size is > 1KB (not empty)
    - `npm run docs:build` succeeds without errors (marp + vitepress)
    - `make check` passes (lint + format-check + build)
    - VitePress config sidebar includes "Slides" entry
  </verify>
  <done>Build pipeline works end-to-end: `npm run build:marp` generates presentation.html from test slides using custom theme. `npm run docs:build` runs marp then vitepress. Makefile targets updated. VitePress sidebar links to presentation. Prettier ignores generated HTML.</done>
</task>

</tasks>

<verification>
1. `npx marp --version` returns version info
2. `npm run build:marp` generates `docs/public/presentation.html`
3. `npm run docs:build` completes without errors
4. `make check` passes
5. Open `docs/public/presentation.html` in browser - dark background, teal accents visible
6. VitePress sidebar shows "Slides" entry
</verification>

<success_criteria>
- marp-cli is a devDependency in package.json
- Custom theme extends Gaia invert with teal/cyan accents (#02c797)
- `npm run build:marp` converts slides.md to presentation.html
- `npm run docs:build` runs Marp build before VitePress build
- Makefile `build` and `check` targets include Marp
- VitePress sidebar has "Slides" link
- Generated HTML is excluded from Prettier formatting
</success_criteria>

<output>
After completion, create `.planning/phases/03-presentation/03-01-SUMMARY.md`
</output>
